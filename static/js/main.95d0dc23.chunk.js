(this.webpackJsonplab2=this.webpackJsonplab2||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(36)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"mainCityRequest",(function(){return N})),n.d(r,"mainCitySuccess",(function(){return R})),n.d(r,"mainCityError",(function(){return _})),n.d(r,"cityRequest",(function(){return Y})),n.d(r,"citySuccess",(function(){return D})),n.d(r,"cityError",(function(){return k})),n.d(r,"cityDelete",(function(){return A}));var a=n(0),c=n.n(a),i=n(4),u=n.n(i),o=(n(21),n(22),n(23),n(24),function(e){var t=e.wind,n=e.cloudiness,r=e.pressure,a=e.humidity,i=e.coordinates;return c.a.createElement("ul",{className:"ExtraInfo"},c.a.createElement("li",null,c.a.createElement("span",null,"\u0412\u0435\u0442\u0435\u0440"),c.a.createElement("span",null,t," m/s")),c.a.createElement("li",null,c.a.createElement("span",null,"\u041e\u0431\u043b\u0430\u0447\u043d\u043e\u0441\u0442\u044c"),c.a.createElement("span",null,n)),c.a.createElement("li",null,c.a.createElement("span",null,"\u0414\u0430\u0432\u043b\u0435\u043d\u0438\u0435"),c.a.createElement("span",null,r," hpa")),c.a.createElement("li",null,c.a.createElement("span",null,"\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c"),c.a.createElement("span",null,a," %")),c.a.createElement("li",null,c.a.createElement("span",null,"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b:"),c.a.createElement("span",null,"[",i,"]")))}),l=(n(25),function(){return c.a.createElement("div",{className:"loadingio-spinner-dual-ring-aqgdafl8n7"},c.a.createElement("div",{className:"ldio-n77olvnu3sn"},c.a.createElement("div",null),c.a.createElement("div",null,c.a.createElement("div",null))))}),s=function(e){var t=e.weather,n=t.city,r=t.temp,a=t.image,i=t.error;return c.a.createElement("div",{className:"MainCity"},i?alert(i):n?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"MainInfo"},c.a.createElement("span",null,n),c.a.createElement("div",{className:"Temp"},c.a.createElement("img",{src:a,alt:""}),c.a.createElement("span",null,r,"\u2103"))),c.a.createElement(o,t)):c.a.createElement(l,null))},f=(n(26),function(e){var t=e.updateCity;return c.a.createElement("header",{className:"App-header"},c.a.createElement("p",null,"\u041f\u043e\u0433\u043e\u0434\u0430 \u0437\u0434\u0435\u0441\u044c"),c.a.createElement("button",{onClick:function(){return t()}},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e"))}),m=function(){var e=JSON.parse(localStorage.getItem("state"));return null===e?null:e.cities};var p=function(e,t){navigator.geolocation.getCurrentPosition(e,t)},E=function(e){if(e instanceof Array){var t=e.filter((function(e){return e.city})).map((function(e){return e.city}));localStorage.setItem("state",JSON.stringify({cities:t}))}return e},d=function(e){return{id:e.id,city:e.name,temp:(e.main.temp-273.15).toFixed(0),image:"http://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png"),wind:e.wind.speed,cloudiness:e.weather[0].description,pressure:e.main.pressure,humidity:e.main.humidity,coordinates:"".concat(e.coord.lat,",").concat(e.coord.lon)}},y=n(3),h=n.n(y),v=n(8),C="https://api.openweathermap.org/data/2.5/weather?appid=".concat("b1db78919ab09f5c992f21e3c26b367c","&"),g=function(e){return fetch("".concat(C).concat(e))},w=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g("q=".concat(t)).then((function(e){if(e.ok)return e.json();throw new Error("status ".concat(e.status))})).then((function(e){return d(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(v.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g("lat=".concat(t,"&lon=").concat(n)).then((function(e){if(e.ok)return e.json();throw new Error("status ".concat(e.status))})).then((function(e){return d(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=n(15),S=(n(28),function(e){var t=e.addCity,n=Object(a.useState)(""),r=Object(O.a)(n,2),i=r[0],u=r[1];return c.a.createElement("div",{className:"Middler"},c.a.createElement("span",null,"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"),c.a.createElement("form",null,c.a.createElement("input",{placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0433\u043e\u0440\u043e\u0434",value:i,onChange:function(e){u(e.target.value)}}),c.a.createElement("button",{onClick:function(e){e.preventDefault(),t(i),u("")}},"\u253f")))}),I=(n(29),n(30),function(e){var t=e.weather,n=e.onDeleted,r=e.i,a=t.city,i=t.temp,u=t.image,s=t.isLoading;return c.a.createElement("div",{className:"SecondaryCity"},s?c.a.createElement(l,null):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"SecondaryInfo"},c.a.createElement("span",null,a),c.a.createElement("img",{src:u,alt:""}),c.a.createElement("span",{id:"temp"},i," \u2103"),c.a.createElement("button",{onClick:function(){return n(r)}},"X")),c.a.createElement(o,t)))}),T=function(e){var t=e.cities,n=e.onDeleted;return c.a.createElement("div",{className:"CityList"},t.map((function(e,t){return c.a.createElement(I,{weather:e,key:"city-".concat(t),onDeleted:n,i:t})})))},j=n(6),N=function(){return{type:"MAIN_CITY_REQUEST"}},R=function(e){return{type:"MAIN_CITY_SUCCESS",city:e}},_=function(e){return{type:"MAIN_CITY_ERROR",error:e}},Y=function(){return{type:"CITY_REQUEST"}},D=function(e){return{type:"CITY_SUCCESS",city:e}},k=function(){return{type:"CITY_ERROR"}},A=function(e){return{type:"CITY_DELETE",index:e}},L=Object(j.b)((function(e){return{weather:e.weather,cities:e.cities}}),r)((function(e){var t=e.mainCityRequest,n=e.mainCitySuccess,r=e.mainCityError,i=e.cityRequest,u=e.citySuccess,o=e.cityError,l=e.cityDelete,E=e.weather,d=e.cities,y=function(){t(),p(h,v)},h=function(e){var t=e.coords.latitude,a=e.coords.longitude;b(t,a).then((function(e){return n(e)})).catch((function(e){return r(e)}))},v=function(){w("Moscow").then((function(e){return n(e)})).catch((function(e){return r(e)}))},C=function(e){(function(e){var t=!0;return 0===d.length||(d.forEach((function(n){n.city&&n.city.toLocaleLowerCase()!==e.toLowerCase()?t&=!0:(alert("Already on the list"),t&=!1)})),t)})(e)&&(i(),w(e).then((function(e){u(e)})).catch((function(e){o(),alert(e)})))};return Object(a.useEffect)((function(){var e=m();e&&e.map((function(e){return C(e)})),y()}),[]),c.a.createElement("div",{className:"App"},c.a.createElement(f,{updateCity:y}),c.a.createElement(s,{weather:E}),c.a.createElement(S,{addCity:C}),c.a.createElement(T,{cities:d,onDeleted:l}))})),M=n(5),P=n(14),x=n(13);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach((function(t){Object(x.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J={weather:{},cities:[]},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MAIN_CITY_REQUEST":return q({},e,{weather:{}});case"MAIN_CITY_SUCCESS":return q({},e,{weather:t.city});case"MAIN_CITY_ERROR":return q({},e,{weather:{error:t.error}});case"CITY_REQUEST":return q({},e,{cities:[].concat(Object(P.a)(e.cities),[{isLoading:!0}])});case"CITY_SUCCESS":var n=e.cities.length-1,r=e.cities.filter((function(e){return e})).map((function(e,t){return e.isLoading&&t<n&&(n=t),e}));return r[n]=t.city,E(r),q({},e,{cities:r});case"CITY_ERROR":var a=e.cities.length-1,c=e.cities.filter((function(e){return e})).map((function(e,t){return e.isLoading&&t<a&&(a=t),e}));return c.pop(),E(c),q({},e,{cities:c});case"CITY_DELETE":return q({},e,{cities:E(e.cities.filter((function(e,n){return n!==t.index})))});default:return e}},F=Object(M.b)(Q);u.a.render(c.a.createElement(j.a,{store:F},c.a.createElement(L,null)),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.95d0dc23.chunk.js.map